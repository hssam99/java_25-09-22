package bank;

import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;

public class Account {
	private String bankName; // 은행명
	private String name; // 계좌주명
	private String accountNum; // 계좌번호
	private int balance; // 잔액
	
	final String path = "/Users/suminhong/web_0826_hsm/memo/bankAccount/";
	
	
	public Account() {}
	
	
	public Account(String bankName, String name, String accountNum, int balance) {
		super();
		this.bankName = bankName;
		this.name = name;
		this.accountNum = accountNum;
		this.balance = balance;
	}


	public String getFileName() {
		return path+bankName+"_"+name+"_"+accountNum+".txt";
	}
	
	
	public void saveTransactionLog(int action, int amount, Account senderAcc, Account receiverAcc) {
		switch (action) {
		case 0: // deposit 입금
			try {
				BufferedWriter bw = new BufferedWriter(new FileWriter(getFileName(), true)); // 이어쓰기
				bw.append("[입금]: "+amount+"원을 입금했습니다");
				bw.newLine();
				bw.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
			break;
			
		case 1: // withdraw 출금
			try {
				BufferedWriter bw = new BufferedWriter(new FileWriter(getFileName(), true)); // 이어쓰기
				bw.append("[출금]: "+amount+"원을 출금했습니다");
				bw.newLine();
				bw.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
			break;
			
		case 2: // transfer withdraw 송금(출금)
			try {
				BufferedWriter bw = new BufferedWriter(new FileWriter(senderAcc.getFileName(), true)); // 이어 쓰기
				bw.append("[출금]: "+receiverAcc.getName()+"님에게 "+amount+"원을 송금했습니다");
				bw.newLine();
				bw.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
			break;	
			
		case 3: // transfer deposit 송금(입금)
			try {
				BufferedWriter bw = new BufferedWriter(new FileWriter(receiverAcc.getFileName(), true)); // 이어 쓰기
				bw.append("[입금]: "+senderAcc.getName()+"님이 "+amount+"원을 송금했습니다");
				bw.newLine();
				bw.close();
			} catch (IOException e) {
				e.printStackTrace();
			}
			break;
			

		default:
			break;
		}
	}
	
	
	public String getBankName() {
		return bankName;
	}
	public void setBankName(String bankName) {
		this.bankName = bankName;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	public String getAccountNum() {
		return accountNum;
	}
	public void setAccountNum(String accountNum) {
		this.accountNum = accountNum;
	}
	public int getBalance() {
		return balance;
	}
	public void setBalance(int balance) {
		this.balance = balance;
	}
	@Override
	public String toString() {
		return "Account [bankName=" + bankName + ", name=" + name + ", accountNum=" + accountNum + ", balance="
				+ balance + "]";
	}
	
}
