package wordBook;

import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;

public class WordBookController {
	
	Scanner sc = new Scanner(System.in);
	final String path = "/Users/suminhong/web_0826_hsm/memo/word.txt";
	Map<String,List<String>> wordBook = new HashMap<>();
	
	
	
	// true -> 단어가 존재 , false -> 단어 존재하지 않음
	public boolean containsWord(String userWord) {
		for(String word : wordBook.keySet()) {
			if(word.toLowerCase().equals(userWord.toLowerCase())) {
				return true;
			}
		}
		return false;
	}
	

	// 단어 하나 출력
	public void printSingleWord(String word) {
		int i = 1;
		System.out.println(word);
		
		List<String> wordMeaning = wordBook.get(word);
		
		for(String meaning : wordMeaning) {
			System.out.println(i++ +") "+ meaning);
		}
	}
	

	public void addWord(Scanner sc) {
		System.out.print("단어 > ");
		String word = sc.next();
		System.out.println("단어 뜻 추가를 완료했다면 0을 입력하세요");
		List<String> wordMeaning = new ArrayList<>();
		String meaning = "";
		while(true) {
			System.out.print("뜻 > ");
			meaning = sc.next();
			
			if(meaning.equals("0")) {
				break;
			}
			
			wordMeaning.add(meaning);
		}
		
		wordBook.put(word, wordMeaning);
		
	}

	
	
	public void searchWord(Scanner sc) {
		System.out.print("검색단어 > ");
		String userWord = sc.next();
		if(containsWord(userWord)) {
			printSingleWord(userWord);
		}else {
			System.out.println("등록되지 않은 단어입니다.");
		}
		System.out.println();
	}

	
	public void UpdateWord(Scanner sc) {
		System.out.print("검색단어 > ");
		String userWord = sc.next();
		if(containsWord(userWord)) {
			printSingleWord(userWord);
			
			for(String s : wordBook.get(userWord)) {
				wordBook.get(userWord).remove(s);
			}
			
			while(true) {
				System.out.println("단어 뜻 추가를 완료했다면 0을 입력하세요");
				System.out.print("뜻 > ");
				String meaning = sc.next();
				
				if(meaning.equals("0")) {
					break;
				}
				
				wordBook.get(userWord).add(meaning);
			}
			
			System.out.println("단어가 수정되었습니다.");
			
		}else {
			System.out.println("단어를 찾을 수 없습니다.");
		}
	}

	
	public void printWord() {
		int i = 1;
		for(String word : wordBook.keySet()) {
			System.out.print(i++ +". ");
			printSingleWord(word);
		}
		System.out.println();
	}

	
	
	public void deleteWord(Scanner sc) {
		System.out.print("검색단어 > ");
		String userWord = sc.next();
		if(containsWord(userWord)) {
			wordBook.remove(userWord);
			System.out.println("단어가 삭제되었습니다.");
		}else {
			System.out.println("단어를 찾을 수 없습니다.");
		}
		
	}

	public void makeWordFile() throws IOException {
		FileWriter fw = new FileWriter(path);
		int i = 1, j=1;
		for(String word : wordBook.keySet()) {
			fw.write(i+"| "+word+"\n");
			List<String> wordMeaning = wordBook.get(word); 
			
			for(String meaning : wordMeaning) {
				fw.write(j+") "+ meaning+"\n");
				j++;
			}
			i++;
		}
		fw.close();
	}

}
